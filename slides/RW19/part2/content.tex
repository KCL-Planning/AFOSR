%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% TODO

% Define pre-handouts



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% packages

\usepackage[english]{babel}
\usepackage{amsmath, amssymb}
\usepackage{array} 
\usepackage{tikz}
\usetikzlibrary{backgrounds}
%\usepackage{slashbox}
%\usepackage{pict2e}
%\usetikzlibrary{backgrounds}
%\usetikzlibrary{matrix}
\usepackage{url}
\usepackage{hyperref}
\usepackage{colordvi}
%\usepackage{xcolor, colortbl}
\usepackage{enumerate}
\usepackage[round]{natbib}
\usepackage{ifthen}
\usepackage{rotating}
\usepackage{varwidth}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% beamer settings

\usetheme{Frankfurt}

\useoutertheme[subsection=false]{smoothbars}
\useinnertheme[shadow=true]{rounded}

\usecolortheme{orchid}
\usecolortheme{whale}

\setbeamertemplate{navigation symbols}{}

\setbeamertemplate{footline}[text line]{\color{dkgreen} \bf
  \insertshortauthor \hfill \insertshorttitle \hfill 15th Reasoning
  Web Summer School (RW
  2019) \hfill \insertframenumber/\inserttotalframenumber}

\setbeamersize{text margin left=0.5cm} 
\setbeamersize{text margin right=0.5cm} 



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% commands

\input{commands}

\newcommand{\images}{../IMAGES}
\graphicspath{{../IMAGES/}}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Title Page & Agenda

\title[Explainable AI Planning]{Explainable AI Planning:\\ Overview and the Case of Contrastive Explanation}

\subtitle{Part 2: Explaining the Space of Plans}

\author[Hoffmann and Magazzeni]{J\"org Hoffmann and Daniele Magazzeni}

\institute[Saarland University and King's College London]{
\includegraphics[height=1.7cm]{saarland-university} \hspace{0.3cm} \includegraphics[height=1.7cm]{kcl} 
}

\date{September 23, 2019}


\AtBeginSection[]
{
  \begin{frame}<beamer>{Agenda}
    \tableofcontents[currentsection]
  \end{frame}
}

\begin{document}

\frame{\titlepage}

\begin{frame}{Agenda}
\tableofcontents
\end{frame}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Introduction
%
%%% Timing: XX min

\section[Introduction]{Introduction}
\subsection*{}

\begin{frame}{The Traditional View of AI Planning}

\centering

\medskip

\includegraphics[height=0.5\textheight]{david-traditional}

\medskip

{\footnotesize (Figure from [\cite{smith:aaai-12}])}

\end{frame}


\begin{frame}{A Typical Reality: Interactive Decision Making}

\centering

\includegraphics[height=0.75\textheight]{david-process}

\medskip

{\footnotesize (Figure from [\cite{smith:aaai-12}])}

\end{frame}


\begin{frame}{The Problem}

\centering

\begin{tikzpicture}
\node[] (human) at (-3,-2.3) {\huge Human};
\node[] (ai) at (2.8,-2.3) {\huge AI};

\visible<1|handout:0>{
\node[] (i1) at (0,0) {\includegraphics[scale=0.25]{part2-intro1.png}};
}

\visible<2|handout:0>{
\node[] (i2) at (-0.28,0.85) {\includegraphics[scale=0.25]{part2-intro2.png}};
\node[] (solution) at (-3.3,3.5) {\large Solution};
\node[] (task) at (-1.6,2.5) {\large Task};
}

\visible<3|handout:0>{
\node[] (i3) at (0,0.85) {\includegraphics[scale=0.25]{part2-intro3.png}};
\node[] (solution) at (-3.3,3.5) {\large Solution};
\node[] (task) at (-1.6,2.5) {\large Task};
\node[] (plan) at (4.0,3.2) {\large Plan};
}

\visible<4|handout:0>{
\node[] (i4) at (0.28,0.57) {\includegraphics[scale=0.25]{part2-intro4.png}};
\node[align=center] (why) at (-2.0,3.4) {Why this plan and \\not another plan?};
\node[] (plan) at (4.0,3.2) {\large Plan};
}

\visible<5|handout:1>{
\node[] (i5) at (-0.285,0.29) {\includegraphics[scale=0.25]{part2-intro5.png}};
\node[align=center] (why) at (-2.0,3.4) {Why this plan and \\not another plan?};
}

\visible<6|handout:0>{
\node[] (i6) at (0,0.57) {\includegraphics[scale=0.25]{part2-intro6.png}};
}
\end{tikzpicture}

\medskip

\end{frame}


\begin{frame}{Our Approach: Plan-Property Dependencies}

\centering

\begin{tikzpicture}
\node[] (human) at (-3,-2.3) {\huge Human};
\node[] (ai) at (2.8,-2.3) {\huge AI};

\visible<1|handout:0>{
\node[] (i3) at (0,0.85) {\includegraphics[scale=0.25]{part2-intro3.png}};
\node[] (solution) at (-3.3,3.5) {\large Solution};
\node[] (task) at (-1.6,2.5) {\large Task};
\node[] (plan) at (4.0,3.2) {\large Plan};
}

\visible<2|handout:0>{
\node[] (i4) at (0.28,0.57) {\includegraphics[scale=0.25]{part2-intro4.png}};
\node[align=center] (why) at (-2.0,3.4) {Why this plan and \\not another plan?};
\node[] (plan) at (4.0,3.2) {\large Plan};
}

\visible<3|handout:0>{
\node[] (i4) at (0.28,0.57) {\includegraphics[scale=0.25]{part2-intro4.png}};
\node[align=center] (why) at (-2.0,3.4) {Why a plan with \textcolor{red}{property A},\\ not one with \textcolor{dkgreen}{property B?}};
\node[] (plan) at (4.0,3.2) {\large Plan};
}

\visible<4|handout:1>{
\node[] (i5) at (-0.285,0.29) {\includegraphics[scale=0.333]{part2-intro5b.png}};
\node[align=center] (why) at (-2.0,3.4) {Why a plan with \textcolor{red}{property A},\\ not one with \textcolor{dkgreen}{property B?}};
\node[align=center] (dependency) at (3.5,3.4) {Because all plans\\ with \textcolor{dkgreen}{property B}\\ have \textcolor{red}{property C!}};
}

\visible<5|handout:0>{
\node[] (i6) at (0,0.57) {\includegraphics[scale=0.333]{part2-intro6b.png}};
\node[align=center] (dependency) at (3.5,3.4) {Because all plans\\ with \textcolor{dkgreen}{property B}\\ have \textcolor{red}{property C!}};
}
\end{tikzpicture}

\medskip

\end{frame}


\begin{frame}{Our Approach in Interactive AI Planning}

\centering

\includegraphics[height=0.75\textheight]{david-process-adapted}

\medskip

{\footnotesize (Figure adapted from [\cite{smith:aaai-12}])}

\end{frame}


\begin{frame}{Oversubscription Planning}

\begin{block}{Oversubscription Planning \hfill {\footnotesize [\cite{smith:icaps-04,domshlak:mirkis:jair-15}]}}
An \defined{OSP task} is a tuple \textred{$\task =
(\vars,\allowbreak\acts,\allowbreak\cost,\allowbreak\init,\allowbreak\goalhard,\allowbreak\goalsoft,\allowbreak\costbound)$}:
\begin{itemize}
\item \vars\ Variables, \acts\ Actions, \cost\ action-cost function, 
\init\ initial state;
\item \goalhard\ \defined{hard} goal;
\item \goalsoft\ \defined{soft} goal;
\item $\costbound \in \reals^+_0$ \defined{cost bound}.
\end{itemize}
As before: outcome state of applicable action sequence $\plan$ denoted
$s\apply{\plan}$. \plan\ is a \defined{plan} if
cost \textred{$\leq \costbound$ and
$\goalhard \subseteq \init\apply{\plan}$}.
%
%% An \defined{oversubscription planning (OSP) task} is a tuple $\task =
%% (\vars,\allowbreak\acts,\allowbreak\cost,\allowbreak\init,\allowbreak\goalhard,\allowbreak\goalsoft,\allowbreak\costbound)$
%% like an FDR task but with two goals -- the \defined{hard} goal
%% \goalhard\ and the \defined{soft} goal \goalsoft, assumed to be
%% defined on disjoint sets of variables -- as well as an additional
%% \defined{cost bound} $\costbound \in \reals^+_0$. A \defined{plan} is
%% an action sequence \plan\ whose summed-up cost is $\leq \costbound$
%% and where $\goalhard \subseteq \init\apply{\plan}$.
%
\end{block}

\bigskip \pause

\textbf{Plan Quality:} Usually additive soft-goal rewards. \pause Here:

\begin{itemize}
\item User preferences hard to specify/elicitate. Iterative planning instead.
\item Plan-property dependencies to support that process.
\end{itemize}

\medskip

\end{frame}


\begin{frame}{(Toy) Example: Mars Rover}

\centering

\vspace{-0.2cm}

\begin{tikzpicture}
\visible<1->{
\node[] (r1) at (1.5,2) {\includegraphics[scale=0.07]{rover2.png}};
\node[] (b1) at (0.5,2.5) {\includegraphics[scale=0.07]{battery.png}};
\node[] (r2) at (-5,-2.5) {\includegraphics[scale=0.07]{rover1.png}};
\node[] (b2) at (-5,-3.5) {\includegraphics[scale=0.07]{battery.png}};

\node[] (m) at (0,0) {\includegraphics[scale=0.2]{mars.png}};
}

\visible<2->{
\node[] (g) at (-1.9,-4) {\Large \textbf{goal}:};
\node[] (i1) at (-0.5,-4) {\includegraphics[scale=0.1]{rovergoal1.png}};
\node[] (i2) at (0.8,-4) {\includegraphics[scale=0.1]{rovergoal2.png}};
\node[] (i3) at (2.5,-4) {\includegraphics[scale=0.1]{rovergoal3.png}};
\node[] (i1) at (-0.5,-3.3) {$I_1$};
\node[] (i2) at (0.8,-3.4) {$I_2$};
\node[] (i3) at (2.5,-3.3) {$I_3$};
}

\visible<3->{
\node[draw, circle, inner sep=3pt] (l1) at (-3,-3) {$L_1$};
\node[draw, circle, inner sep=3pt] (l2) at (-2.1,1.3) {$L_2$};
\node[draw, circle, inner sep=3pt] (l3) at (-0.5,-1) {$L_3$};
\node[draw, circle, inner sep=3pt] (l4) at (3,2) {$L_4$};
\node[draw, circle, inner sep=3pt] (l5) at (1.8,0) {$L_5$};
\node[draw, circle, inner sep=3pt] (l6) at (3.2,-2.5) {$L_6$};

\draw[thick] (l1) to (l2);
\draw[thick] (l1) to (l3);
\draw[thick] (l2) to (l3);
\draw[thick] (l3) to (l5);
\draw[thick] (l4) to (l5);
\draw[thick] (l4) to (l6);
\draw[thick] (l5) to (l6);
}

\visible<4->{
\node[align=left] (actions) at (-5.5,2) {
%\Large \textbf{actions}:\\
%\vspace*{0.2cm}
\begin{varwidth}{4.0cm}
\begin{itemize}
\item $drive(R_i,L_x,L_y)$
\item $takeImage(I_x,R_y)$
\end{itemize}
\end{varwidth}
};
}
\end{tikzpicture}
	
\end{frame}


\begin{frame}{Mars Rover OSP}

\centering

\begin{tikzpicture}
\node[] (el) at (0,0) {\Large energy limit};
\node[] (el) at (3,0) {\includegraphics[scale=0.2]{battery-low.png}};
\end{tikzpicture}

\bigskip \medskip

\visible<2>{
\begin{tabular}{c|c|c}
\includegraphics[scale=0.15]{rovergoal1.png} &
\includegraphics[scale=0.15]{rovergoal2.png} &
\includegraphics[scale=0.15]{rovergoal3.png} \\\hline

\includegraphics[scale=0.1]{yes.png} &
\includegraphics[scale=0.1]{no.png} &
\includegraphics[scale=0.1]{yes.png} \\

\end{tabular}
}

\medskip

\end{frame}


\begin{frame}{Our Problem in Mars Rover}

\centering

\begin{tikzpicture}
\node[] (task) at (-6,1) {
\begin{tikzpicture}
\node[] (p) at (0,2) {\textbf{Planning Task}};
\node[] (r1) at (0,-0.3) {\includegraphics[scale=0.06]{rover1.png}};
\node[] (r2) at (1.5,-0.3) {\includegraphics[scale=0.06]{rover2.png}};
\node[] (i1) at (-0.5,1) {\includegraphics[scale=0.07]{rovergoal1.png}};
\node[] (i2) at (0.5,1) {\includegraphics[scale=0.07]{rovergoal2.png}};
\node[] (i3) at (1.7,1) {\includegraphics[scale=0.07]{rovergoal3.png}};
\end{tikzpicture}
};

\visible<2->{
\node[] (p) at (0,2.5) {\textbf{Plan}};
\node[draw, align=left, fill=white] (p1) at (0,0.9) {
$drive(R_1,L_1,L2)$\\
$takeImage(I_1, R_1)$\\
$drive(R_2,L_4,L_5)$\\
$takeImage(I_3, R_2)$
};
}

\visible<3->{
\node[fill=white] (p1) at (-0.0,-1.65) {
\begin{tabular}{c|c|c}
\includegraphics[scale=0.07]{rovergoal1.png} &
\includegraphics[scale=0.07]{rovergoal2.png} &
\includegraphics[scale=0.07]{rovergoal3.png} \\\hline

\includegraphics[scale=0.05]{yes.png} &
\includegraphics[scale=0.05]{no.png} &
\includegraphics[scale=0.05]{yes.png} \\

\end{tabular}
};
}

\visible<4>{
\node[] (hw) at (-4.0,-2.5) {\includegraphics[scale=0.2]{human-why.png}};
}
\end{tikzpicture}
	
\end{frame}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Explanation Framework
%
%%% Timing: XX min

\section[Framework]{Explanation Framework}
\subsection*{}

\begin{frame}{}

\end{frame}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Computing Explanations
%
%%% Timing: XX min

\section[Computing]{Computing Explanations}
\subsection*{}

\begin{frame}{}

\end{frame}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Compilations
%
%%% Timing: XX min

\section[Compilations]{Compilations}
\subsection*{}

\begin{frame}{}

\end{frame}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Current Results
%
%%% Timing: XX min

\section[Results]{Current Results}
\subsection*{}

\begin{frame}{}

\end{frame}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% NoGood Learning in State Space
%
%%% Timing: XX min

\section[NoGood Learning]{NoGood Learning in State Space}
\subsection*{}

\begin{frame}{}

\end{frame}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Last Slide & References

\section*{}

\begin{frame}{Last Slide}

{\centering

Thanks for your attention. Questions?

}

\end{frame}

\section*{}

\begin{frame}[allowframebreaks]{References}
\footnotesize
\bibliographystyle{named}
\bibliography{abbreviations,biblio,crossref}
\end{frame}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% BACKUP SLIDES


\end{document}
