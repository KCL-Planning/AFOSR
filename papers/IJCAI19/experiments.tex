%!TEX root=./main.tex


% pgf settings: shrink the tick labels a bit
\pgfplotsset{every tick label/.append style={font=\scriptsize}}

\newcommand{\scatterplotsize}{8cm}
\newcommand{\scatterplotxlabelshift}{1.5ex}
\newcommand{\scatterplotylabelshift}{-3ex}

\section{Experiments}

\joerg{tentative plan, to simplify presentation and focus on the 
main messages rather than algorothm-configuration space: use hFF
throughout, and vary SysW (aka top-down) vs SysS (aka bottom-up)
throughout; on IPC benchmarks, vary hC on vs off, where ``on'' means
to include transfer; on action-set prop experiments, vary traps on vs
off, where ``on'' means to include transfer. ... Rebecca to generate
the missing data for IPC and nomystery, then we'll check and if it
looks ok use this.}

\joerg{Rebecca/Michael: check out the IPC net-benefit benchmarks. Reviewers may naturally expect us to experiment with those, given our strong focus on oversubscription planning (actually this question came up in the discussion with the NASA guys yesterday). In the net-bnefit benchmarks, goal facts have rewards which we don't need. The question is whether, stripping away these rewards and imposing a plan-cost bound, we would get benchmarks not already covered by bour IPC experiments anyway. If the answer is "no", we can just say so in the paper. If the answer is "yes", it would be good (though probably not absolitely necessary) to experiment with these domains as well. In any case, we should know what the answer is.}


\setlength{\tabcolsep}{2pt}
\renewcommand{\arraystretch}{0.8}
\begin{figure*}[ht]
	\centering \input{tables/coverage_IPC.tex} 
	\caption{
		Benchmark: oversubscription IPC
		domains with bound $ = x \cdot $ optimal cost with $
		x \in \{0.25, 0.5, 0.75\}$, solvable with lmcut with no cost bound in 
		30 min and with less then 31 goal facts(limitation of implementation).
		hff: $h^{FF}$ with gready-best-first-search and preferred operators and 
		bottom-up meta search; maxbu: $h^{max}$ with $A^*$ and bottom-up meta search;
		maxtd: $h^{max}$ with $A^*$ and top-down meta search; hC(p): online learned
		dead-end detectors with bounded DFS with and without propagation of the
		learn detectors through the top-down meta search three.
	}
\end{figure*}

\begin{figure}[ht]
\scriptsize
\begin{subfigure}[t]{0.22\textwidth}
\begin{tikzpicture}
	\begin{axis}
		 [
			grid,
			width=4.5cm,
			height=4.5cm,
			log origin = 0,
			% ymode = log,
			xtick = {0.25,0.5,0.75},
			legend style={at={(0.95,-0.15)}},
			legend columns=2,
			ybar,
			bar width=2pt,
			enlarge x limits=0.3,
		 ]
		\addplot+[blue] coordinates
			{(0.25, 0.5382) (0.5, 1.5071) (0.75, 4.2980)};
		\addplot+[red] coordinates
			{(0.25, 0.4317) (0.5, 0.9334) (0.75, 2.2903)};
		\addplot+[yellow] coordinates
			{(0.25, 0.6062) (0.5, 1.7218) (0.75, 4.6103)};
		\addplot+[darkgreen] coordinates
			{(0.25, 0.0040) (0.5, 1.6119) (0.75, 6.1167)};
		\addplot+[orange] coordinates
			{(0.25, 0.0076) (0.5, 0.9874) (0.75, 4.9756)};
		\legend{hff, maxbu, maxtd, hCp, hC}
	\end{axis}
\end{tikzpicture}
\caption{}
\label{fig:avg-search-time}
\end{subfigure}
\begin{subfigure}[t]{0.22\textwidth}
\begin{tikzpicture}
	\begin{axis}
		 [
			width=4.5cm,
			height=4.5cm,
			ymin= 0.3,
			ymax = 1,
			%grid,
			%ymode = log,
			xtick = {0.25,0.5,0.75},
			ytick = {0.4,0.5,0.6,0.7,0.8,0.9},
			%yticklabels = {0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0},
			legend style={at={(0.95,-0.38)}},
			legend columns=4,
			yticklabel pos=right
		 ]
		\addplot+[sharp plot] coordinates
			{(0.25, 0.40) (0.5, 0.63) (0.75, 0.84)};
		\addplot+[sharp plot] coordinates
			{(0.25, 0.88) (0.5, 0.83) (0.75, 0.65)};
		\legend{bu, td}
	\end{axis}
\end{tikzpicture}
\caption{}
\label{fig:frac-meta-search-tree}
\end{subfigure}
\caption{(a) average search time per meta search node; 
	(b) average fraction of explored meta search tree} 
\end{figure}


%\begin{figure*}[ht]
%	\small
%	\centering
%	\input{tables/coverage_td_vs_bu.tex}
%	\caption{Comparison of coverage per cost bound for top-down vs bottom-up meta search.
%	Additionally there is (\#meta search nodes/maximal number of meta search nodes) displayed as average over the commonly solved instances.
%	Planner $A^*$ with $h^{max}$}
%\end{figure*}



\subsubsection*{Action Set Properties}

\begin{figure}[ht]
	\begin{tabular}{l|r|rrrrrrrrrr}
		& & \multicolumn{10}{c}{\# properties} \\
		domain & \#goals & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 \\\hline
		nomystery & 3 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10\\\hline
				& 4 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10\\\hline
				& 5 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 8 & 8 & 7\\\hline
				& 6 & 10 & 9 & 9 & 8 & 5 & 4 & 4 & 3 & 2 & 2\\\hline\hline
		openstacks & 1 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & - \\\hline
				& 1 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & - \\\hline
				& 2 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & - \\\hline
				& 3 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & - \\\hline
				& 4 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & - \\\hline
				& 5 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & - \\\hline
				& 6 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & - \\\hline
				& 7 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & - \\\hline
				& 8 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & - \\\hline
				& 9 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & - \\\hline\hline
		rovers & 2 & 10 & 10 & 10 & 10 & 10 & 8 & 5 & 2 & 2 &- \\\hline
				& 4 & 9 & 6 ยง & 6 & 2 & 0 & 0 & 0 & 0 & 0 & - \\\hline
				& 6 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & - \\\hline 
				& 8 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & - \\\hline 
				& 10 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & - \\\hline 
				& 12 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & - \\\hline 
				& 14 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & - \\\hline 
				& 16 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & - \\\hline 
				& 18 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & - \\\hline\hline
		TPP & 3 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10\\\hline
			& 4 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10\\\hline
			& 5 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 10 & 8 & 3\\\hline
			& 6 & 10 & 10 & 10 & 10 & 10 & 8 & 3 & 1 & 1 & 1\\\hline


	\end{tabular}
	\caption{Coverage for $h^{max}$ and top-down meta-search, 10 instances per \# goals and \# properties combination.
	For nomystery and TPP is the size of the locations fixed to 6 locations respectively 5 markets and the fuel is the 
	minimal amount needed to solve the task.
	The original goal facts are hard goals and the property-goal-facts are soft-goals.}
\end{figure}


\FloatBarrier
\begin{figure*}[ht]
\input{coverage_nomystery.tex}
\caption{nomystery}
\end{figure*}


\begin{figure*}[ht]
\input{coverage_tpp.tex}
\caption{TPP}
\end{figure*}


\begin{figure*}[ht]
\input{coverage_rovers.tex}
\caption{rovers}
\end{figure*}
