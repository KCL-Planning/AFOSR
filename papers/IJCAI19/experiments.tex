%!TEX root=./main.tex


% pgf settings: shrink the tick labels a bit
\pgfplotsset{every tick label/.append style={font=\scriptsize}}

\newcommand{\scatterplotsize}{8cm}
\newcommand{\scatterplotxlabelshift}{1.5ex}
\newcommand{\scatterplotylabelshift}{-3ex}

\section{Experiments}

\joerg{tentative plan, to simplify presentation and focus on the 
main messages rather than algorothm-configuration space: use hFF
throughout, and vary SysW (aka top-down) vs SysS (aka bottom-up)
throughout; on IPC benchmarks, vary hC on vs off, where ``on'' means
to include transfer; on action-set prop experiments, vary traps on vs
off, where ``on'' means to include transfer. ... Rebecca to generate
the missing data for IPC and nomystery, then we'll check and if it
looks ok use this.}

\rebecca{ 1-1.5 page(s) Michael/Rebecca }


\joerg{Ideally, we should actually do something with existing oversubscription 
	planning benchmarks. Carmel and Mirkis generated ones in their
	work
	(http://iew3.technion.ac.il/~dcarmel/Papers/Sources/ecai14b.pdf),
	from IPC benchmarks, by restricting plan cost to 25\%, 50\%,
	75\%, and 100\% of optimal plan cost for all goals. Emulate
	this, for unit action costs, in a way that makes our current
	technology applicable.}



\setlength{\tabcolsep}{2pt}
\renewcommand{\arraystretch}{0.8}
\begin{figure*}[ht]
	\centering \input{tables/coverage_IPC.tex} 
	\caption{
		Benchmark: oversubscription IPC
		domains with bound $ = x \cdot $ optimal cost with $
		x \in \{0.25, 0.5, 0.75\}$, solvable with lmcut with no cost bound in 
		30 min and with less then 31 goal facts(limitation of implementation).
		hff: $h^{FF}$ with gready-best-first-search and preferred operators and 
		bottom-up meta search; maxbu: $h^{max}$ with $A^*$ and bottom-up meta search;
		maxtd: $h^{max}$ with $A^*$ and top-down meta search; hC(p): online learned
		dead-end detectors with bounded DFS with and without propagation of the
		learn detectors through the top-down meta search three.
	}
\end{figure*}


\begin{figure*}[ht]
	\centering \input{tables/coverage_IPC_hff.tex} 
	\caption{
		Benchmark: oversubscription IPC
		domains with bound $ = x \cdot $ optimal cost with $
		x \in \{0.25, 0.5, 0.75\}$, solvable with lmcut with no cost bound in 
		30 min and with less then 31 goal facts(limitation of implementation).
	}
\end{figure*}

\begin{figure}[ht]
\scriptsize
\begin{subfigure}[t]{0.22\textwidth}
\begin{tikzpicture}
	\begin{axis}
		 [
			grid,
			width=4.5cm,
			height=4.5cm,
			log origin = 0,
			% ymode = log,
			xtick = {0.25,0.5,0.75},
			legend style={at={(0.95,-0.15)}},
			legend columns=2,
			ybar,
			bar width=2pt,
			enlarge x limits=0.3,
		 ]
		\addplot+[blue] coordinates
			{(0.25, 0.48) (0.5, 1.44) (0.75, 4.02)};
		\addplot+[red] coordinates
			{(0.25, 0.0099) (0.5, 1.34) (0.75, 3.02)};
		\addplot+[yellow] coordinates
			{(0.25, 0.53) (0.5, 2.22) (0.75, 6.87)};
		\addplot+[darkgreen] coordinates
			{(0.25, 0.0038) (0.5, 1.06) (0.75, 4.26)};
		\legend{hff bu, hC hff bu, hff td, hC hff td}
	\end{axis}
\end{tikzpicture}
\caption{}
\label{fig:avg-search-time}
\end{subfigure}
\begin{subfigure}[t]{0.22\textwidth}
\begin{tikzpicture}
	\begin{axis}
		 [
			width=4.5cm,
			height=4.5cm,
			ymin= 0.3,
			ymax = 1,
			%grid,
			%ymode = log,
			xtick = {0.25,0.5,0.75},
			ytick = {0.4,0.5,0.6,0.7,0.8,0.9},
			%yticklabels = {0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0},
			legend style={at={(0.95,-0.38)}},
			legend columns=4,
			yticklabel pos=right
		 ]
		\addplot+[sharp plot] coordinates
			{(0.25, 0.40) (0.5, 0.63) (0.75, 0.84)};
		\addplot+[sharp plot] coordinates
			{(0.25, 0.88) (0.5, 0.83) (0.75, 0.65)};
		\legend{bu, td}
	\end{axis}
	\begin{axis}
		 [
			width=4.5cm,
			height=4.5cm,
			%grid,
			ymode = log,
			xtick = {0.25,0.5,0.75},
			ytick = {10,100,1000,10000},
			%yticklabels = {0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0},
			legend style={at={(0.95,-0.38)}},
			legend columns=4,
			yticklabel pos=left,
			ybar,
			bar width=2pt,
		 ]
		\addplot+[] coordinates
			{(0.25, 158) (0.5, 268) (0.75, 220)};
		\addplot+[] coordinates
			{(0.25, 7735) (0.5, 2337) (0.75, 415)};
	\end{axis}
\end{tikzpicture}
\caption{}
\label{fig:frac-meta-search-tree}
\end{subfigure}
\caption{(a) average search time per meta search node; 
	(b) average fraction of explored meta search tree} 
\end{figure}



\subsubsection*{Action Set Properties}


\FloatBarrier
\begin{figure*}[ht]
\input{coverage_nomystery.tex}
\caption{nomystery}
\end{figure*}


\begin{figure*}[ht]
\input{coverage_tpp.tex}
\caption{TPP}
\end{figure*}


\begin{figure*}[ht]
\input{coverage_rovers.tex}
\caption{rovers}
\end{figure*}
